FROM orion/tensorflow-notebook

USER root

RUN conda install --quiet --yes \
    'nbconvert'
RUN  conda install -c conda-forge --quiet --yes \
    'pipreqs' && \
    jupyter labextension install @jupyterlab/google-drive
RUN  conda clean --all -f -y

RUN mkdir templates
COPY template /home/$NB_USER/templates
RUN chown -R $NB_USER:$NB_GID /home/$NB_USER/templates && \
    chmod 500 /home/$NB_USER/templates && \
    chmod 400 /home/$NB_USER/templates/*

USER $NB_UID
